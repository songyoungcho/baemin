{% extends 'base.html' %}
{% block content %}
<div class="main-container">
    <!-- flash ì˜¤ë¥˜ -->
    {% for message in get_flashed_messages() %}
    <div class="alert alert-danger" role="alert">
        {{ message }}
    </div>
    {% endfor %}
    <!--ê°€ê²Œ-->
    <div class="store" style="cursor: pointer;">
        <label class="store-name">{{ store.store_name }}  </label>
        <a href="javascript:void(0)" data-uri="{{ url_for('store.vote', store_id=store.id) }}"
           class="recommend btn btn-sm"> ğŸ’–
            <span class="badge rounded-pill bg-success">{{ store.voter|length }}</span>
        </a>
        <br>
        <br>
        <label>ìµœì†Œì£¼ë¬¸ </label>
        <label class="store-deliver">{{ store.min_order }}</label>
        <label>ì›, ë°°ë‹¬íŒ </label>
        <label class="store-deliver">{{ store.deliver }}</label>
        <label>ì›</label>
        <br>
        <br>
        <label class="store-intro">{{ store.store_intro }}</label>
    </div>
    <div class="my-3">
        {% if g.user == store.user %}
        <div class="store-modify">
            <button type="button" method="post" class="modify" onclick="location.href='{{ url_for('my.modify', store_id=store.id) }}'; " >ìˆ˜ì •</button>
            <button type="button" method="post" class="delete" onclick="location.href='javascript:void(0)'; " data-uri="{{ url_for('my.delete', store_id=store.id) }}" >ì‚­ì œ</button>
        </div>
        {% endif %}
    </div>
    <br>
    <br>
    <!--ë©”ë‰´-->
    {% for menu in store.menu_set %}
    <div class="menu-list">
        <div class="menu-label">
        <div>
        <label class="menu-name">{{ menu.menu_name }}</label>
        <label>, </label>

        <label class="menu-price">{{ menu.price }}</label>
        <label>ì›</label>
        <br>
        <br>
        </div>
        <div>
        <label class="menu-info">{{ menu.menu_content }}</label>
        </div>
            </div>
        {% if g.user == menu.user %}
        <div class="store-modify">
            <button type="button" method="post" class="modify" onclick="location.href='{{ url_for('menu.modify', menu_id=menu.id) }}'; " >ìˆ˜ì •</button>
            <button type="button" method="post" class="delete" onclick="location.href='javascript:void(0)'; " data-uri="{{ url_for('menu.delete', menu_id=menu.id) }}" >ì‚­ì œ</button>
        </div>
        {%else%}

        <button type="button" method="post" data-uri="{{ url_for('menu.inbag', menu_id=menu.id) }}"
                class="inbag btn btn-sm" onclick="location.href='javascript:void(0)', store_id=store.id) }}'; " >ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€</button>

        {% endif %}
    </div>
    {% endfor %}
    {% if g.user == store.user %}
    <br>
    <br>
    <div class="menu-create">
        <button type="button" method="post" class="menu-btn" onclick="location.href='{{ url_for('menu.create_menu', store_id=store.id) }}'; " >ë©”ë‰´ ìƒì„±</button>
    </div>
    {% endif %}
    <div><a class="bag" href="{{ url_for('my.bag') }}"><img src="https://ifh.cc/g/DtAA4w.png" width="80px" height="50%"/></a>
</div>
</div>

{% endblock %}
{% block script %}
<script type='text/javascript'>
const delete_elements = document.getElementsByClassName("delete");
Array.from(delete_elements).forEach(function(element) {
    element.addEventListener('click', function() {
        if(confirm("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            location.href = this.dataset.uri;
        };
    });
});
const recommend_elements = document.getElementsByClassName("recommend");
Array.from(recommend_elements).forEach(function(element) {
    element.addEventListener('click', function() {
        if(confirm("ì •ë§ë¡œ ì¶”ì²œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                location.href = this.dataset.uri;
        };
    });
});

const inbag_elements = document.getElementsByClassName("inbag");
Array.from(inbag_elements).forEach(function(element) {
    element.addEventListener('click', function() {

        if(confirm("ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                location.href = this.dataset.uri;
        };
    });
});
</script>
{% endblock %}